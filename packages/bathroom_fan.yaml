bathroom_fan:
  fan:
    - platform: template
      fans:
        bathroom:
          friendly_name: "Bathroom"
          value_template: "{{ states('switch.fan_bathroom') }}"
          turn_on:
            service: script.bathroom_fan_on
          turn_off:
            service: script.bathroom_fan_off

  generic_hygrostat:
    - name: Bathroom
      device_class: "dehumidifier"
      humidifier: switch.fan_bathroom
      target_sensor: sensor.bathroom_humidity

  script:
    bathroom_fan_on:
      sequence:
        - service: switch.turn_on
          entity_id: switch.fan_bathroom
    bathroom_fan_off:
      sequence:
        - service: switch.turn_off
          entity_id: switch.fan_bathroom
